# ReqX

**åŸºäº LLM çš„éœ€æ±‚æŒ–æ˜ä¸è§„çº¦ç”Ÿæˆå·¥å…·**ã€‚é€šè¿‡å¤šè½®å¯¹è¯æ¾„æ¸…æ¨¡ç³Šéœ€æ±‚ï¼Œè‡ªåŠ¨ç”Ÿæˆç»“æ„åŒ–å·¥ç¨‹è§„çº¦ (YAML)ã€‚

## ğŸ“‘ ç›®å½•

- [âœ¨ æ ¸å¿ƒåŠŸèƒ½](#-æ ¸å¿ƒåŠŸèƒ½)
- [ğŸ› ï¸ æŠ€æœ¯æ ˆ](#ï¸-æŠ€æœ¯æ ˆ)
- [ğŸ—ï¸ æ¶æ„](#ï¸-æ¶æ„)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
  - [å®‰è£…](#1-å®‰è£…)
  - [é…ç½®](#2-é…ç½®)
  - [è¿è¡Œ](#3-è¿è¡Œ)
- [ğŸ’¡ ä½¿ç”¨æŒ‡å—](#-ä½¿ç”¨æŒ‡å—)
- [ğŸ¤– æ”¯æŒçš„æ¨¡å‹é…ç½®](#-æ”¯æŒçš„æ¨¡å‹é…ç½®)
- [ğŸ“š æ–‡æ¡£å¯¼èˆª](#-æ–‡æ¡£å¯¼èˆª)
- [ğŸ› ï¸ å¼€å‘è€…å·¥å…·](#ï¸-å¼€å‘è€…å·¥å…·)
- [ğŸ“„ License](#-license)

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

*   **æ·±åº¦æŒ–æ˜**: ä¸»åŠ¨è¿½é—®è¯†åˆ«éšæ€§éœ€æ±‚ä¸è¾¹ç•Œæ¡ä»¶ï¼Œè€Œéç®€å•çš„è®°å½•å‘˜ã€‚
*   **ç»“æ„åŒ–è¾“å‡º**: ç”ŸæˆåŒ…å«æ ¹ç›®æ ‡ã€è§£å†³æ–¹æ¡ˆã€é£é™©è¯„ä¼°ã€éªŒæ”¶æ ‡å‡†çš„æ ‡å‡† YAML æ–‡æ¡£ã€‚
*   **çŸ¥è¯†æ²‰æ·€**: è‡ªåŠ¨æå–å…³é”®å†³ç­–ç‚¹å¹¶æŒä¹…åŒ–ï¼Œæ”¯æŒæ–­ç‚¹ç»­èŠã€‚
*   **å¤šæ¨¡å‹æ”¯æŒ**: é€‚é… OpenAI, Azure, Claude, Gemini åŠæ‰€æœ‰ OpenAI å…¼å®¹æ¥å£ã€‚
*   **å®‰å…¨åˆè§„**: å¯†é’¥ç¯å¢ƒå˜é‡ç®¡ç†ï¼Œæ—¥å¿—è‡ªåŠ¨è„±æ•ã€‚
*   **æ‰©å±•æ€§**: å†…ç½® Web API (`/v1/chat/send`) ä¸é…ç½®è¯Šæ–­æ¥å£ï¼Œæ”¯æŒ SQLite/YAML åŒå­˜å‚¨åç«¯ã€‚

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

*   **LangChain**: ç»Ÿä¸€ LLM æ¥å£è°ƒç”¨ä¸æ¨¡å‹é€‚é…ã€‚
*   **CrewAI**: Agent å·¥å…·æ¥å£æ ‡å‡† (`BaseTool`) å®ç°ä¸ç¼–æ’æ”¯æŒã€‚
*   **PyYAML**: YAML æ ¼å¼è§„çº¦ç”Ÿæˆã€è§£æä¸é…ç½®æ–‡ä»¶ç®¡ç†ã€‚
*   **HTTPX**: åº•å±‚ HTTP å®¢æˆ·ç«¯ï¼Œå¤„ç† API è¯·æ±‚ä¸è¿é€šæ€§æµ‹è¯•ã€‚

---

## ğŸ—ï¸ æ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨åˆ†å±‚ç»“æ„ï¼šCLI è´Ÿè´£äº¤äº’ä¸çŠ¶æ€ç®¡ç†ï¼›éœ€æ±‚æŒ–æ˜æŠ€èƒ½è´Ÿè´£â€œæŠŠä¿¡æ¯å˜æˆè§„çº¦â€ï¼›æ¨¡å‹å·¥å‚è´Ÿè´£ä¸åŒ LLM çš„ç»Ÿä¸€æ¥å…¥ï¼›å­˜å‚¨æ¨¡å—è´Ÿè´£çŸ¥è¯†ä¸å¯¹è¯è®°å½•çš„æŒä¹…åŒ–ã€‚

```mermaid
flowchart TD
  U[ç”¨æˆ·] -->|è¾“å…¥/å‘½ä»¤| CLI[CLI äº¤äº’å±‚<br/>agents/cli.py]
  CLI -->|è§„çº¦ç”Ÿæˆ| Tool[éœ€æ±‚æŒ–æ˜æŠ€èƒ½<br/>RequirementExcavationSkill]
  Tool -->|invoke| LLMF[LLM å·¥å‚<br/>agents/core/llm_factory.py]
  LLMF --> API[å¤–éƒ¨æ¨¡å‹ API<br/>OpenAI/Azure/Claude/Gemini/å…¼å®¹æ¥å£]

  CLI --> KS[é¡¹ç›®çŸ¥è¯†å­˜å‚¨<br/>KnowledgeStore]
  CLI --> TS[é€å­—ç¨¿å­˜å‚¨<br/>TranscriptStore]
  KS -->|SQLite/YAML| Disk1[(knowledge file)]
  TS -->|SQLite/YAML| Disk2[(transcript file)]
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…

é¦–å…ˆå…‹éš†ä»“åº“ï¼Œå¹¶å®‰è£…åˆ°å½“å‰ç¯å¢ƒï¼ˆå¯ç¼–è¾‘æ¨¡å¼ï¼‰ï¼š

```bash
git clone <repository_url>
cd reqx

python -m pip install -e .
```

### 2. é…ç½®

åˆå§‹åŒ–é…ç½®æ–‡ä»¶ï¼š

```bash
reqx init-config
```

è¿™ä¼šæç¤ºä½ é€‰æ‹©é…ç½®æ–‡ä»¶è¾“å‡ºè·¯å¾„ï¼ˆä¹Ÿå¯ç”¨ `--config-out` ç›´æ¥æŒ‡å®šï¼‰ã€‚è¯·æ ¹æ®ä½ çš„æ¨¡å‹æœåŠ¡å•†ç¼–è¾‘è¯¥æ–‡ä»¶ï¼ˆè¯¦è§ä¸‹æ–‡â€œæ”¯æŒçš„æ¨¡å‹â€ï¼‰ã€‚
åŒæ—¶ï¼Œè¯·åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶å¡«å…¥ API Keyï¼š

```env
OPENAI_API_KEY=YOUR_OPENAI_API_KEY
```

### 3. è¿è¡Œ

ä¸€åˆ‡å°±ç»ªï¼å¯åŠ¨ CLI å¼€å§‹å¯¹è¯ï¼š

```bash
# å¯åŠ¨äº¤äº’å¼ç»ˆç«¯
reqx

# æˆ–è€…ä½¿ç”¨ Python æ¨¡å—è¿è¡Œ
python -m agents
```

---

## ğŸ’¡ ä½¿ç”¨æŒ‡å—

è¿›å…¥ `reqx` ç»ˆç«¯åï¼Œä½ å¯ä»¥åƒèŠå¤©ä¸€æ ·æè¿°ä½ çš„æƒ³æ³•ã€‚

**å¸¸ç”¨æŒ‡ä»¤ï¼š**

| æŒ‡ä»¤ | è¯´æ˜ |
| :--- | :--- |
| `/spec` | **æ ¸å¿ƒåŠŸèƒ½**ã€‚åŸºäºå½“å‰å¯¹è¯ç”Ÿæˆéœ€æ±‚è§„çº¦ YAMLï¼ˆé¢„è§ˆæ¨¡å¼ï¼‰ã€‚ |
| `/done` | **å®Œæˆä»»åŠ¡**ã€‚ç”Ÿæˆæœ€ç»ˆç‰ˆè§„çº¦ï¼Œè‡ªåŠ¨æ„æ€é¡¹ç›®åç§°ï¼Œå¹¶ç»“æŸæµç¨‹ã€‚ |
| `/show` | æ˜¾ç¤ºå½“å‰å·²æå–çš„é¡¹ç›®çŸ¥è¯†ã€‚ |
| `/reset` | æ¸…ç©ºæœ¬è½®å¯¹è¯è®°å½•ï¼Œå¹¶æ¸…ç©ºè½ç›˜é€å­—ç¨¿ï¼ˆä¿ç•™å·²æå–çš„çŸ¥è¯†ï¼‰ã€‚ |
| `/exit` | é€€å‡ºç¨‹åºã€‚ |

éäº¤äº’ï¼ˆCIï¼‰å¸¸ç”¨æ–¹å¼ï¼š
- `reqx --help` æŸ¥çœ‹å…¨éƒ¨å‚æ•°ä¸ç”¨æ³•
- `reqx spec --config llm.yaml --knowledge path/to/project_knowledge.db`
- `reqx done --config llm.yaml --knowledge path/to/project_knowledge.db --auto-pick-name`

é€å­—ç¨¿é»˜è®¤è¡Œä¸ºï¼š
- è‹¥ä½ æŠŠ `--transcript` æŒ‡å‘ä¸€ä¸ªå·²å­˜åœ¨çš„æ–‡ä»¶ï¼Œé»˜è®¤ä¼šè§†ä¸º**æ–°ä¼šè¯**å¹¶æ¸…ç©ºæ—§é€å­—ç¨¿ï¼›å¦‚éœ€ç»§ç»­è¿½åŠ ï¼Œç”¨ `--resume-transcript`ã€‚

WebUIï¼ˆæœ¬æœºï¼‰ï¼š
- `reqx web --config llm.yaml --bind 127.0.0.1 --port 8788`
- å†™å…¥ç±»æ¥å£ï¼ˆchat/sendã€config/prompt writeï¼‰é»˜è®¤è¦æ±‚ `Authorization: Bearer $REQX_WEB_TOKEN`ï¼›config/prompt read è¿”å›å†…å®¹ä¼šåšè„±æ•å¤„ç†ã€‚

**å¯¹è¯ç¤ºä¾‹ï¼š**

> **User**: æˆ‘æƒ³åšä¸€ä¸ªèƒŒå•è¯ Appã€‚
>
> **Agent**: å¥½çš„ã€‚é’ˆå¯¹è¿™ä¸ª Appï¼Œæ‚¨çš„ç›®æ ‡ç”¨æˆ·ç¾¤ä½“ä¸»è¦æ˜¯è°ï¼Ÿï¼ˆä¾‹å¦‚ï¼šè€ƒç ”å­¦ç”Ÿã€å‡ºå›½ç•™å­¦å…šã€è¿˜æ˜¯èŒåœºäººå£«ï¼Ÿï¼‰
>
> **User**: ä¸»è¦æ˜¯è€ƒç ”å…šã€‚
>
> **Agent**: æ˜ç™½äº†ã€‚å¯¹äºè€ƒç ”å…šæ¥è¯´ï¼ŒçœŸé¢˜è¯æ±‡éå¸¸é‡è¦ã€‚æ‚¨æ˜¯å¦éœ€è¦ç³»ç»Ÿæ”¯æŒå¯¼å…¥å†å¹´çœŸé¢˜ PDFï¼Ÿå¦å¤–ï¼Œè®°å¿†ç®—æ³•æ–¹é¢æ˜¯å¦å¼ºåˆ¶è¦æ±‚ä½¿ç”¨è‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿ï¼Ÿ
>
> *(Agent ä¼šè‡ªåŠ¨è®°å½•ï¼šç”¨æˆ·=è€ƒç ”å…šï¼ŒåŠŸèƒ½=PDFå¯¼å…¥ï¼Œç®—æ³•=è‰¾å®¾æµ©æ–¯)*

---

## ğŸ¤– æ”¯æŒçš„æ¨¡å‹é…ç½®

æœ¬é¡¹ç›®é€šè¿‡ `llm.yaml` æ”¯æŒå¤šç§ä¸»æµå¤§æ¨¡å‹ã€‚

### OpenAI / DeepSeek (å…¼å®¹æ¨¡å¼)
```yaml
provider: openai_compatible
model: deepseek-chat
base_url: https://api.deepseek.com
api_key_env: DEEPSEEK_API_KEY
```

### Azure OpenAI
```yaml
provider: azure
model: gpt-4
azure_endpoint: https://your-resource.openai.azure.com/
azure_deployment: your-deployment-name
azure_api_version: 2024-02-15-preview
api_key_env: AZURE_OPENAI_API_KEY
```

### Anthropic (Claude)
```yaml
provider: anthropic
model: claude-3-5-sonnet-20240620
api_key_env: ANTHROPIC_API_KEY
```

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥é˜… `doc/` ç›®å½•ä¸‹çš„æ–‡æ¡£ï¼š

*   [**01_é¡¹ç›®æ€»è¿°**](doc/01_project_overview.md)ï¼šæ¶æ„è®¾è®¡ä¸è®¾è®¡ç†å¿µã€‚
*   [**02_è„šæœ¬ä¸æ¨¡å—è¯¦è§£**](doc/02_scripts_and_modules.md)ï¼šæ·±å…¥ä»£ç å®ç°ç»†èŠ‚ã€‚
*   [**03_ä½¿ç”¨è¯´æ˜ä¹¦**](doc/03_user_manual.md)ï¼šè¯¦ç»†çš„æ“ä½œæ‰‹å†Œä¸ FAQã€‚
*   [**04_CLI å‚æ•°å‚è€ƒ**](doc/04_cli_reference.md)ï¼šæ‰€æœ‰å‘½ä»¤ã€æ‰€æœ‰å‚æ•°ä¸ CI/äº¤äº’ä½¿ç”¨åœºæ™¯ã€‚

---

## ğŸ› ï¸ å¼€å‘è€…å·¥å…·

æ¨èä½¿ç”¨ `reqx` çš„å­å‘½ä»¤ï¼š

*   `reqx check-api --config llm.yaml`ï¼šå¥åº·æ£€æŸ¥ï¼ˆæµ‹è¯• LLM è¿æ¥æ˜¯å¦æ­£å¸¸ï¼‰ã€‚
*   `reqx clean`ï¼šä¸€é”®æ¸…ç†ï¼ˆåˆ é™¤ç¼“å­˜ä¸æ„å»ºäº§ç‰©ï¼‰ã€‚
*   `reqx check-deps`ï¼šä¾èµ–æ£€æŸ¥ï¼ˆç¡®è®¤ç¯å¢ƒæ˜¯å¦å®Œæ•´ï¼‰ã€‚
*   `reqx install`ï¼šå®‰è£…æœ¬ä»“åº“ï¼ˆå¯ç¼–è¾‘æ¨¡å¼ï¼‰ã€‚
*   `reqx init-config`ï¼šç”Ÿæˆé…ç½®æ–‡ä»¶ã€‚
*   `reqx wizard`ï¼šä¸€é”®é…ç½®å‘å¯¼ï¼ˆç”Ÿæˆé…ç½®/å†™å…¥ env/å¥åº·æ£€æŸ¥ï¼‰ã€‚

---

## ğŸ“„ License

[MIT License](LICENSE)
